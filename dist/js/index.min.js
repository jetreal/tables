var scrolled;function makeResizableDiv(e){const t=document.querySelector(e),s=document.querySelectorAll(e+" .resizer"),i=20;let o=0,a=0,l=0,n=0,p=0,r=0;for(let e=0;e<s.length;e++){const c=s[e];function d(e){if(c.classList.contains("bottom-right")){getParentCenter(),getCornerCoords(),getMaxRangeItem();const l=o+(e.pageX-p),n=a+(e.pageY-r);function s(){t.style.width=l+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function d(){t.style.height=n+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(maxAboutWidth>l-10)return void s();if(maxAboutHeight>n-10)return void d();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft){t.style.width=l+10+"px";var f=new Event("mouseup");return void window.dispatchEvent(f)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=n+10+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}l>i&&(t.style.width=l+"px"),n>i&&(t.style.height=n+"px")}else if(c.classList.contains("bottom-left")){getParentCenter(),getCornerCoords(),getMaxRangeItem();const c=a+(e.pageY-r),g=o-(e.pageX-p);function s(){t.style.width=g+3+"px",t.style.left=l-3+(e.pageX-p)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}function d(){t.style.height=c+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(maxAboutWidth>g-10)return void s();if(maxAboutHeight>c-10)return void d();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=g+10+"px",t.style.left=l-10+(e.pageX-p)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=c+10+"px",t.style.top=n+10+(e.pageY-r)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}c>i&&(t.style.height=c+"px"),g>i&&(t.style.width=g+"px",t.style.left=l+(e.pageX-p)+"px")}else if(c.classList.contains("top-right")){function s(){t.style.width=l+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function d(){t.style.height=f+3+"px",t.style.top=n-3+(e.pageY-r)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}getParentCenter(),getCornerCoords(),getMaxRangeItem();const l=o+(e.pageX-p),f=a-(e.pageY-r);if(maxAboutWidth>l-10)return void s();if(maxAboutHeight>f-10)return void d();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft)return void s();if(wrapperHeight<sumPosAndTranslTop)return void d();l>i&&(t.style.width=l+"px"),f>i&&(t.style.height=f+"px",t.style.top=n+(e.pageY-r)+"px")}else{const c=o-(e.pageX-p),g=a-(e.pageY-r);function s(){t.style.width=c+3+"px",t.style.left=l-3+(e.pageX-p)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}function d(){t.style.height=g+3+"px",t.style.top=n-3+(e.pageY-r)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}if(getParentCenter(),getCornerCoords(),getMaxRangeItem(),maxAboutWidth>c-10)return void s();if(maxAboutHeight>g-10)return void d();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=c+10+"px",t.style.left=l-10+(e.pageX-p)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}if(wrapperHeight<sumPosAndTranslTop){t.style.height=g+10+"px",t.style.top=n-10+(e.pageY-r)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}c>i&&(t.style.width=c+"px",t.style.left=l+(e.pageX-p)+"px"),g>i&&(t.style.height=g+"px",t.style.top=n+(e.pageY-r)+"px")}}function f(){window.removeEventListener("mousemove",d)}c.addEventListener("mousedown",(function(e){e.preventDefault(),o=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),l=t.offsetLeft,n=t.offsetTop,p=e.pageX,r=e.pageY,window.addEventListener("mousemove",d),window.addEventListener("mouseup",f)}))}}window.onscroll=function(){scrolled=window.pageYOffset||document.documentElement.scrollTop,document.getElementById("scroll").innerHTML=scrolled+"px : scroll"},$(window).on("load resize",(function(){var e=$("html").outerWidth(),t=$(window).height();$("#width").html(e+"px : width"),$("#height").html(t+"px : height")})),document.onmousemove=function(e){var t=e.pageX,s=e.pageY;document.getElementById("mouseX").innerHTML=t+": mouseX",document.getElementById("mouseY").innerHTML=s+": mouseY"},makeResizableDiv(".resizable");const btnTable=document.querySelector(".j-wrap-content-sidebar__add-table-btn"),wrapperDraggerMap=document.querySelector(".j-wrap-content-map"),draggedMap=document.querySelector(".draggedMap"),resizers=document.querySelector(".resizers"),mapConner=document.querySelectorAll(".resizer"),addTableBtn=document.querySelector(".j-wrap-content-sidebar__add-table-btn");let boxItems=document.querySelectorAll(".box-item");const targetElement=document.querySelector(".draggable-item--uno");function onDragRestrictMap(){let e,t;switch(getParentCenter(),getCornerCoords(),!0){case wrapperWidth<sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e-20,y:t});break;case wrapperHeight<sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t-20});break;case wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e+20,y:t});break;case wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t+20});break;default:return}}var mapDraggble;function dragMap(){mapDraggble=Draggable.create(draggedMap,{onDrag:onDragRestrictMap})[0]}let wrapperWidth,wrapperHeight,itemCoords;function getParentCenter(){wrapperWidth=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("width").replace("px",""))/2,wrapperHeight=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("height").replace("px",""))/2}function getAllItemCoords(){itemCoords=[],boxItems.forEach((e,t)=>{let s={};s.id=e.id;const i=e.style.transform||"translate(0px, 0px)";return s.itemTranslateLeft=getTranslateXValue(i),s.itemTranslateTop=getTranslateYValue(i),s.itemWidth=e.offsetWidth,s.itemHeight=e.offsetHeight,s.positionLeft=e.offsetLeft,s.positionTop=e.offsetTop,itemCoords=[...itemCoords,s],[...itemCoords,s]})}mapConner.forEach(e=>{e.addEventListener("mouseover",(function(){Draggable.get(draggedMap).disable()}))}),mapConner.forEach(e=>{e.addEventListener("mouseout",dragMap)}),dragMap(),getAllItemCoords();let sumPosAndTranslLeft,sumPosAndTranslTop,maxAboutWidth=0,maxAboutHeight=0;function getMaxRangeItem(){getAllItemCoords();const e=[],t=[];itemCoords.forEach(s=>{let i=s.itemTranslateLeft+s.positionLeft+s.itemWidth,o=s.itemTranslateTop+s.positionTop+s.itemHeight;e.push(i);let a=Math.max(...e);t.push(o);let l=Math.max(...t);maxAboutWidth=a,maxAboutHeight=l})}function getCornerCoords(){let e=draggedMap.offsetLeft,t=draggedMap.offsetTop;const s=draggedMap.style.transform||"translate(0px, 0px)";let i=getTranslateXValue(s),o=getTranslateYValue(s);sumPosAndTranslLeft=i+e,sumPosAndTranslTop=o+t}function getTranslateXValue(e){var t=e.indexOf("("),s=e.indexOf(",");return parseInt(e.slice(t+1,s-2))}function getTranslateYValue(e){var t=e.indexOf(","),s=e.indexOf(")");return parseInt(e.slice(t+1,s-1))}var draggableCollection;function draggable(){draggableCollection=Draggable.create(boxItems,{bounds:draggedMap,cursor:"pointer",type:"x, y",onPress:onPress,onRelease:onRelease,onDragStart:onStart,onDragEnd:function(){boxItems.forEach(e=>{e.style.color="blue",e.style.pointerEvents="auto"}),boxItems.forEach(e=>{this.hitTest(e)&&TweenMax.to(this.target,.1,{x:xx,y:yy})})}})}getMaxRangeItem(),getParentCenter(),getCornerCoords(),draggable();var chairs,xx=0,yy=0;function onPress(){xx=this.x,yy=this.y}function onStart(){mapDraggble.disable(),boxItems.forEach(e=>{e.style.pointerEvents="none"}),(new TimelineMax).to(this.target,.1,{opacity:1})}function onRelease(){getMaxRangeItem(),getAllItemCoords(),mapDraggble.enable()}function createTable(){const e=document.createElement("div"),t=e.id="id"+Date.now();console.log(t),e.classList.add(t),e.classList.add("box-item"),e.classList.add("any-map-item"),e.classList.add("draggable-item"),e.classList.add("resizableTable");const s=document.createElement("div");s.classList.add("resizerTablesTable"),e.appendChild(s);const i=document.createElement("div");i.classList.add("resizerTable","top-left");const o=document.createElement("div");o.classList.add("resizerTable","top-right");const a=document.createElement("div");a.classList.add("resizerTable","bottom-left");const l=document.createElement("div");l.classList.add("resizerTable","bottom-right"),s.appendChild(i),s.appendChild(o),s.appendChild(a),s.appendChild(l);const n=document.createElement("div");n.classList.add("tableCenter"),e.appendChild(n);const p=document.createElement("div");p.classList.add("tableCenter-line"),n.appendChild(p);const r=document.createElement("div");r.innerHTML="x",r.classList.add("tableCenter-del"),n.appendChild(r);const d=document.createElement("div");d.classList.add("tableText");const f=document.createElement("p");f.innerHTML="text",f.classList.add("tebleTextP"),d.appendChild(f),n.appendChild(d);const c=document.createElement("input");c.classList.add("tableText__input"),c.type="text",c.name="tableText",c.value="",n.appendChild(c);const g=document.createElement("div");g.classList.add("chair","elipsTop");const h=document.createElement("div");h.classList.add("chair","elipsBottom");const u=document.createElement("div");u.classList.add("chair","elipsLeft");const m=document.createElement("div");let T;m.classList.add("chair","elipsRight"),n.appendChild(g),n.appendChild(h),n.appendChild(u),n.appendChild(m),r.addEventListener("click",(function(){T=e.parentNode.removeChild(e),console.log(T),itemCoords=itemCoords.filter(e=>e.id!=T.id),boxItems=document.querySelectorAll(".box-item"),console.log(itemCoords)})),resizers.appendChild(e),corners=document.querySelectorAll(".resizerTable"),boxItems=document.querySelectorAll(".box-item"),getAllItemCoords(),onChangeColor("."+t),disableDraggableParent(),tables=document.querySelectorAll(".resizerTablesTable"),replaceLine("."+t),draggable(),makeresizableTableDiv("."+t),inputsHandler("."+t),onConflictItemsWithOther()}function makeresizableTableDiv(e){const t=document.querySelector(e),s=document.querySelectorAll(e+" .resizerTable"),i=20;let o=0,a=0,l=0,n=0,p=0,r=0;for(let c=0;c<s.length;c++){const g=s[c];function d(s){if(g.classList.contains("bottom-right")){addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const l=o+(s.pageX-p),n=a+(s.pageY-r);l>i&&(t.style.width=l+"px"),n>i&&(t.style.height=n+"px")}else if(g.classList.contains("bottom-left")){addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const n=a+(s.pageY-r),d=o-(s.pageX-p);n>i&&(t.style.height=n+"px"),d>i&&(t.style.width=d+"px",t.style.left=l+(s.pageX-p)+"px")}else if(g.classList.contains("top-right")){addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const l=o+(s.pageX-p),d=a-(s.pageY-r);l>i&&(t.style.width=l+"px"),d>i&&(t.style.height=d+"px",t.style.top=n+(s.pageY-r)+"px")}else{addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const d=o-(s.pageX-p),f=a-(s.pageY-r);d>i&&(t.style.width=d+"px",t.style.left=l+(s.pageX-p)+"px"),f>i&&(t.style.height=f+"px",t.style.top=n+(s.pageY-r)+"px")}}function f(){window.removeEventListener("mousemove",d)}g.addEventListener("mousedown",(function(e){e.preventDefault(),o=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),l=t.offsetLeft,n=t.offsetTop,p=e.pageX,r=e.pageY,window.addEventListener("mousemove",d),window.addEventListener("mouseup",f)}))}}function replaceLine(e){const t=document.querySelector(e),s=document.querySelector(`${e} .tableCenter-line`);switch(!0){case t.offsetWidth<=t.offsetHeight:s.style.width="100%",s.style.height="14px",s.style.borderRadius="15px 15px 0 0";break;case t.offsetWidth>t.offsetHeight:s.style.width="14px",s.style.height="100%",s.style.borderRadius="15px 0 0 15px";default:return}}function addTopAndBottomChair(e){const t=document.querySelector(e+" .tableCenter");function s(t){!function(t){const s=document.querySelector(e+" "+t);s&&(removed=s.parentNode.removeChild(s))}(t)}switch(!0){case t.offsetWidth>415&&t.offsetWidth<=455:s(".elipsTop11");break;case t.offsetWidth>375&&t.offsetWidth<=415:s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>335&&t.offsetWidth<=375:s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>295&&t.offsetWidth<=335:s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>255&&t.offsetWidth<=295:s(".elipsTop7"),s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>215&&t.offsetWidth<=255:s(".elipsTop6"),s(".elipsTop7"),s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>175&&t.offsetWidth<=215:s(".elipsTop5"),s(".elipsTop6"),s(".elipsTop7"),s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>135&&t.offsetWidth<=175:s(".elipsTop4"),s(".elipsTop5"),s(".elipsTop6"),s(".elipsTop7"),s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth>95&&t.offsetWidth<=135:s(".elipsTop3"),s(".elipsTop4"),s(".elipsTop5"),s(".elipsTop6"),s(".elipsTop7"),s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11");break;case t.offsetWidth<=95:document.querySelector(".elipsTop2")&&(s(".elipsTop2"),s(".elipsTop3"),s(".elipsTop4"),s(".elipsTop5"),s(".elipsTop6"),s(".elipsTop7"),s(".elipsTop8"),s(".elipsTop9"),s(".elipsTop10"),s(".elipsTop11"))}function i(s){if(!document.querySelector(e+" "+s)){let e=document.createElement("div");e.classList.add("elipsTop"),e.classList.add("chair"),e.classList.add(s.slice(1)),t.appendChild(e);let i=document.createElement("div");i.classList.add("elipsBottom"),i.classList.add("chair"),i.classList.add(s.slice(1)),t.appendChild(i)}}switch(!0){case t.offsetWidth>415:i(".elipsTop10"),i(".elipsTop9"),i(".elipsTop8"),i(".elipsTop7"),i(".elipsTop6"),i(".elipsTop5"),i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>375&&t.offsetWidth<=415:i(".elipsTop9"),i(".elipsTop8"),i(".elipsTop7"),i(".elipsTop6"),i(".elipsTop5"),i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>335&&t.offsetWidth<=375:i(".elipsTop8"),i(".elipsTop7"),i(".elipsTop6"),i(".elipsTop5"),i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>295&&t.offsetWidth<=335:i(".elipsTop7"),i(".elipsTop6"),i(".elipsTop5"),i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>255&&t.offsetWidth<=295:i(".elipsTop6"),i(".elipsTop5"),i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>215&&t.offsetWidth<=255:i(".elipsTop5"),i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>175&&t.offsetWidth<=215:i(".elipsTop4"),i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>135&&t.offsetWidth<=175:i(".elipsTop3"),i(".elipsTop2");break;case t.offsetWidth>95&&t.offsetWidth<=135:i(".elipsTop2")}}function addLeftAndRightChair(e){const t=document.querySelector(e+" .tableCenter");function s(t){!function(t){const s=document.querySelector(e+" "+t);s&&(removed=s.parentNode.removeChild(s))}(t)}switch(!0){case t.offsetHeight>415&&t.offsetHeight<=455:s(".elipsLeft11");break;case t.offsetHeight>375&&t.offsetHeight<=415:s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>335&&t.offsetHeight<=375:s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>295&&t.offsetHeight<=335:s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>255&&t.offsetHeight<=295:s(".elipsLeft7"),s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>215&&t.offsetHeight<=255:s(".elipsLeft6"),s(".elipsLeft7"),s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>175&&t.offsetHeight<=215:s(".elipsLeft5"),s(".elipsLeft6"),s(".elipsLeft7"),s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>135&&t.offsetHeight<=175:s(".elipsLeft4"),s(".elipsLeft5"),s(".elipsLeft6"),s(".elipsLeft7"),s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight>95&&t.offsetHeight<=135:s(".elipsLeft3"),s(".elipsLeft4"),s(".elipsLeft5"),s(".elipsLeft6"),s(".elipsLeft7"),s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11");break;case t.offsetHeight<=95:document.querySelector(".elipsLeft2")&&(s(".elipsLeft2"),s(".elipsLeft3"),s(".elipsLeft4"),s(".elipsLeft5"),s(".elipsLeft6"),s(".elipsLeft7"),s(".elipsLeft8"),s(".elipsLeft9"),s(".elipsLeft10"),s(".elipsLeft11"))}function i(s){if(!document.querySelector(e+" "+s)){let e=document.createElement("div");e.classList.add("elipsLeft"),e.classList.add("chair"),e.classList.add(s.slice(1)),t.appendChild(e);let i=document.createElement("div");i.classList.add("elipsRight"),i.classList.add("chair"),i.classList.add(s.slice(1)),t.appendChild(i)}}switch(!0){case t.offsetHeight>415:i(".elipsLeft10"),i(".elipsLeft9"),i(".elipsLeft8"),i(".elipsLeft7"),i(".elipsLeft6"),i(".elipsLeft5"),i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>375&&t.offsetHeight<=415:i(".elipsLeft9"),i(".elipsLeft8"),i(".elipsLeft7"),i(".elipsLeft6"),i(".elipsLeft5"),i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>335&&t.offsetHeight<=375:i(".elipsLeft8"),i(".elipsLeft7"),i(".elipsLeft6"),i(".elipsLeft5"),i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>295&&t.offsetHeight<=335:i(".elipsLeft7"),i(".elipsLeft6"),i(".elipsLeft5"),i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>255&&t.offsetHeight<=295:i(".elipsLeft6"),i(".elipsLeft5"),i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>215&&t.offsetHeight<=255:i(".elipsLeft5"),i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>175&&t.offsetHeight<=215:i(".elipsLeft4"),i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>135&&t.offsetHeight<=175:i(".elipsLeft3"),i(".elipsLeft2");break;case t.offsetHeight>95:i(".elipsLeft2")}}function onChangeColor(){(chairs=document.querySelectorAll(".chair")).forEach(e=>{e.addEventListener("click",changeColorChair)})}function changeColorChair(e){e.target.classList.toggle("elipsBgColored")}function disableDraggableParent(){function e(){document.querySelectorAll(".resizerTable").forEach(e=>{this.style.opacity="1"}),dragTableDisable()}function t(){document.querySelectorAll(".resizerTable").forEach(e=>{this.style.opacity="0"}),dragTableEnable()}document.querySelectorAll(".resizerTablesTable").forEach(s=>{s.addEventListener("mouseover",e),s.addEventListener("mouseout",t)})}function dragTableDisable(){mapDraggble.disable(),draggableCollection.forEach(e=>{e.disable()})}function dragTableEnable(){mapDraggble.enable(),draggableCollection.forEach(e=>{e.enable()})}function inputsHandler(e){let t=document.querySelector(e+" .tebleTextP");const s=document.querySelector(e+" .tableText__input");t.addEventListener("dblclick",(function(){function e(){t.innerHTML=this.value||"num",s.style.display="none",t.style.display="block"}this.style.display="none",s.style.display="block",s.focus(),s.value=t.innerHTML,s.addEventListener("blur",e),s.addEventListener("keypress",(function(t){13===t.keyCode&&e()}))}))}function onConflictItemWithMap(e){const t=document.querySelector(e);if(t){const e=t.offsetWidth,n=t.offsetHeight;let p,r,d,f;const c=draggedMap.offsetWidth,g=draggedMap.offsetHeight;function s(){let e=t.offsetLeft,s=t.offsetTop;const i=t.style.transform||"translate(0px, 0px)";let o=getTranslateXValue(i),a=getTranslateYValue(i);p=o+e,r=a+s}function i(){if(e+p>c-3){var s=new Event("mouseup");window.dispatchEvent(s),d=p,t.style.maxWidth=e-7+"px"}d!==p&&(t.style.maxWidth="")}function o(){if(n+r>g-3){var e=new Event("mouseup");window.dispatchEvent(e),f=r,t.style.maxHeight=n-7+"px"}f!==r&&(t.style.maxHeight="")}function a(){if(p<10){var e=new Event("mouseup");window.dispatchEvent(e),t.style.maxWidth=c-10+"px",d=t.style.width,t.style.left="40px"}}function l(){if(r<10){var e=new Event("mouseup");window.dispatchEvent(e)}}s(),i(),o(),a(),l()}}function onConflictItemsWithOther(e){const t=document.querySelector(e);if(t){const e=itemCoords.filter(e=>e.id!==t.id),a=t.offsetWidth,l=t.offsetHeight,n=t.offsetLeft,p=t.offsetTop,r=t.style.transform||"translate(0px, 0px)",d=getTranslateXValue(r),f=getTranslateYValue(r);function s(){const t=e.filter(e=>e.itemTranslateTop+e.positionTop+e.itemHeight>p+f&&e.itemTranslateTop+e.positionTop<p+f+l&&e.itemTranslateLeft+e.positionLeft>n+d).map(e=>e.positionLeft+e.itemTranslateLeft);let s;switch(s=Math.min(...t),!0){case void 0!==s&&a+n+d>s&&n+d<s:s=Math.min(...t);let e=new Event("mouseup");window.dispatchEvent(e),console.log("bum bum");break;default:return!1}}function i(){const t=e.filter(e=>e.itemTranslateLeft+e.positionLeft+e.itemWidth>n+d&&e.itemTranslateLeft+e.positionLeft<n+d+a),s=t.map(e=>e.positionTop+e.itemTranslateTop),i=t.find(e=>e.positionTop+e.itemTranslateTop==s);let o;i&&(o=i.itemHeight||0);const r=Math.min(...s);if(l+p+f>r&&p+f<r+o){var c=new Event("mouseup");window.dispatchEvent(c),console.log("slam"),console.log(r)}}function o(){const t=e.filter(e=>e.itemTranslateTop+e.positionTop+e.itemHeight>p+f&&e.itemTranslateTop+e.positionTop<p+f+l&&e.itemTranslateLeft+e.positionLeft<n+d),s=t.map(e=>e.positionLeft+e.itemTranslateLeft);console.log(s);let i,o,a=Math.max(...s);switch(console.log(a),t&&(i=t.find(e=>e.positionLeft+e.itemTranslateLeft==a)),i&&(o=i.positionLeft+i.itemTranslateLeft+i.itemWidth||0),!0){case void 0!==i&&n+d<o:console.log(n+d),console.log(o);let e=new Event("mouseup");window.dispatchEvent(e),console.log("bumssss");break;default:return!1}}s(),i(),o()}}btnTable.addEventListener("click",createTable),makeresizableTableDiv(".resizableTable"),disableDraggableParent(),onConflictItemsWithOther();