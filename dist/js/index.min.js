var scrolled;function makeResizableDiv(e){const t=document.querySelector(e),o=document.querySelectorAll(e+" .resizer"),s=20;let i=0,a=0,n=0,l=0,r=0,d=0;for(let e=0;e<o.length;e++){const f=o[e];function p(e){if(f.classList.contains("bottom-right")){getParentCenter(),getCornerCoords(),getMaxRangeItem();const n=i+(e.pageX-r),l=a+(e.pageY-d);function o(){t.style.width=n+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function p(){t.style.height=l+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(maxAboutWidth>n-40)return void o();if(maxAboutHeight>l-40)return void p();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft){t.style.width=n+10+"px";var c=new Event("mouseup");return void window.dispatchEvent(c)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=l+10+"px";c=new Event("mouseup");return void window.dispatchEvent(c)}n>s&&(t.style.width=n+"px"),l>s&&(t.style.height=l+"px")}else if(f.classList.contains("bottom-left")){getParentCenter(),getCornerCoords(),getMaxRangeItem();const f=a+(e.pageY-d),g=i-(e.pageX-r);function o(){t.style.width=g+3+"px",t.style.left=n-3+(e.pageX-r)+"px";var o=new Event("mouseup");window.dispatchEvent(o)}function p(){t.style.height=f+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(maxAboutWidth>g-40)return void o();if(maxAboutHeight>f-40)return void p();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=g+10+"px",t.style.left=n-10+(e.pageX-r)+"px";c=new Event("mouseup");return void window.dispatchEvent(c)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=f+10+"px",t.style.top=l+10+(e.pageY-d)+"px";c=new Event("mouseup");return void window.dispatchEvent(c)}f>s&&(t.style.height=f+"px"),g>s&&(t.style.width=g+"px",t.style.left=n+(e.pageX-r)+"px")}else if(f.classList.contains("top-right")){function o(){t.style.width=n+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function p(){t.style.height=c+3+"px",t.style.top=l-3+(e.pageY-d)+"px";var o=new Event("mouseup");window.dispatchEvent(o)}getParentCenter(),getCornerCoords(),getMaxRangeItem();const n=i+(e.pageX-r),c=a-(e.pageY-d);if(maxAboutWidth>n-40)return void o();if(maxAboutHeight>c-40)return void p();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft)return void o();if(wrapperHeight<sumPosAndTranslTop)return void p();n>s&&(t.style.width=n+"px"),c>s&&(t.style.height=c+"px",t.style.top=l+(e.pageY-d)+"px")}else{const f=i-(e.pageX-r),g=a-(e.pageY-d);function o(){t.style.width=f+3+"px",t.style.left=n-3+(e.pageX-r)+"px";var o=new Event("mouseup");window.dispatchEvent(o)}function p(){t.style.height=g+3+"px",t.style.top=l-3+(e.pageY-d)+"px";var o=new Event("mouseup");window.dispatchEvent(o)}if(getParentCenter(),getCornerCoords(),getMaxRangeItem(),maxAboutWidth>f-40)return void o();if(maxAboutHeight>g-40)return void p();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=f+10+"px",t.style.left=n-10+(e.pageX-r)+"px";c=new Event("mouseup");return void window.dispatchEvent(c)}if(wrapperHeight<sumPosAndTranslTop){t.style.height=g+10+"px",t.style.top=l-10+(e.pageY-d)+"px";c=new Event("mouseup");return void window.dispatchEvent(c)}f>s&&(t.style.width=f+"px",t.style.left=n+(e.pageX-r)+"px"),g>s&&(t.style.height=g+"px",t.style.top=l+(e.pageY-d)+"px")}}function c(){window.removeEventListener("mousemove",p)}f.addEventListener("mousedown",(function(e){e.preventDefault(),i=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),n=t.offsetLeft,l=t.offsetTop,r=e.pageX,d=e.pageY,window.addEventListener("mousemove",p),window.addEventListener("mouseup",c)}))}}window.onscroll=function(){scrolled=window.pageYOffset||document.documentElement.scrollTop,document.getElementById("scroll").innerHTML=scrolled+"px : scroll"},$(window).on("load resize",(function(){var e=$("html").outerWidth(),t=$(window).height();$("#width").html(e+"px : width"),$("#height").html(t+"px : height")})),document.onmousemove=function(e){var t=e.pageX,o=e.pageY;document.getElementById("mouseX").innerHTML=t+": mouseX",document.getElementById("mouseY").innerHTML=o+": mouseY"},makeResizableDiv(".resizable");const btnTable=document.querySelector(".j-wrap-content-sidebar__add-table-btn"),wrapperDraggerMap=document.querySelector(".j-wrap-content-map"),draggedMap=document.querySelector(".draggedMap"),restricter=document.querySelector(".resizable__restricter"),restricterTop=document.querySelector(".resizable-wall__restricter"),resizers=document.querySelector(".resizers"),mapConner=document.querySelectorAll(".resizer");let sides=document.querySelectorAll(".resizerWindow");const addTableBtn=document.querySelector(".j-wrap-content-sidebar__add-table-btn");let boxItems=document.querySelectorAll(".box-item"),tableDraggables=document.querySelectorAll(".draggable-item");const targetElement=document.querySelector(".draggable-item--uno");function disableDragMap(e){e.forEach(e=>{e.addEventListener("mouseover",(function(){Draggable.get(draggedMap).disable()}))}),mapConner.forEach(e=>{e.addEventListener("mouseout",dragMap)})}function onDragRestrictMap(){let e,t;switch(getParentCenter(),getCornerCoords(),!0){case wrapperWidth<sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e-20,y:t});break;case wrapperHeight<sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t-20});break;case wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e+20,y:t});break;case wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t+20});break;default:return}}var mapDraggble;function dragMap(){mapDraggble=Draggable.create(draggedMap,{onDrag:onDragRestrictMap})[0]}let wrapperWidth,wrapperHeight,itemCoords;function getParentCenter(){wrapperWidth=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("width").replace("px",""))/2,wrapperHeight=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("height").replace("px",""))/2}function getAllItemCoords(e){return itemCoords=[],e.forEach((e,t)=>{let o={};o.id=e.id;const s=e.style.transform||"translate(0px, 0px)";o.itemTranslateLeft=getTranslateXValue(s),o.itemTranslateTop=getTranslateYValue(s),o.itemWidth=e.offsetWidth,o.itemHeight=e.offsetHeight,o.positionLeft=e.offsetLeft,o.positionTop=e.offsetTop,itemCoords=[...itemCoords,o],console.log(itemCoords)}),itemCoords}disableDragMap(mapConner),dragMap(),itemCoords=getAllItemCoords(boxItems),console.log(itemCoords);let sumPosAndTranslLeft,sumPosAndTranslTop,maxAboutWidth=0,maxAboutHeight=0;function getMaxRangeItem(){itemCoords=getAllItemCoords(boxItems);const e=[],t=[];itemCoords.forEach(o=>{let s=o.itemTranslateLeft+o.positionLeft+o.itemWidth,i=o.itemTranslateTop+o.positionTop+o.itemHeight;e.push(s);let a=Math.max(...e);t.push(i);let n=Math.max(...t);maxAboutWidth=a,maxAboutHeight=n})}function getCornerCoords(){let e=draggedMap.offsetLeft,t=draggedMap.offsetTop;const o=draggedMap.style.transform||"translate(0px, 0px)";let s=getTranslateXValue(o),i=getTranslateYValue(o);sumPosAndTranslLeft=s+e,sumPosAndTranslTop=i+t}function getTranslateXValue(e){var t=e.indexOf("("),o=e.indexOf(",");return parseInt(e.slice(t+1,o-2))}function getTranslateYValue(e){var t=e.indexOf(","),o=e.indexOf(")");return parseInt(e.slice(t+1,o-1))}var draggableCollection;function draggable(){draggableCollection=Draggable.create(tableDraggables,{bounds:restricter,cursor:"pointer",type:"x, y",onPress:onPress,onRelease:onRelease,onDragStart:onStart,onDragEnd:function(){console.log(this),tableDraggables.forEach(e=>{e.style.color="blue",e.style.pointerEvents="auto"}),tableDraggables.forEach(e=>{this.hitTest(e)&&TweenMax.to(this.target,.1,{x:xx,y:yy})})}})}getMaxRangeItem(),getCornerCoords(),draggable();var chairs,xx=0,yy=0;function onPress(){xx=this.x,yy=this.y,(new TimelineMax).to(this.target,.1,{scale:1,opacity:1,ease:Power4.easeIn}),this.target.style.opacity<1&&(btnTable.addEventListener("click",onCreateTable),buttonForTextItem.addEventListener("click",onCreateItem))}function onStart(){mapDraggble.disable(),tableDraggables.forEach(e=>{e.style.pointerEvents="none"}),(new TimelineMax).to(this.target,.1,{opacity:1})}function onRelease(){getMaxRangeItem(),itemCoords=getAllItemCoords(boxItems),mapDraggble.enable()}function onCreateTable(){const e=document.createElement("div"),t=e.id="id"+Date.now();console.log(t),e.classList.add(t),e.classList.add("box-item"),e.classList.add("any-map-item"),e.classList.add("draggable-item"),e.classList.add("resizableTable");const o=document.createElement("div");o.classList.add("resizerTablesTable"),e.appendChild(o);const s=document.createElement("div");s.classList.add("resizerTable","top-left");const i=document.createElement("div");i.classList.add("resizerTable","top-right");const a=document.createElement("div");a.classList.add("resizerTable","bottom-left");const n=document.createElement("div");n.classList.add("resizerTable","bottom-right"),o.appendChild(s),o.appendChild(i),o.appendChild(a),o.appendChild(n);const l=document.createElement("div");l.classList.add("tableCenter"),e.appendChild(l);const r=document.createElement("div");r.classList.add("tableCenter-line"),l.appendChild(r);const d=document.createElement("div");d.innerHTML="x",d.classList.add("tableCenter-del"),l.appendChild(d);const p=document.createElement("div");p.classList.add("tableText");const c=document.createElement("p");c.innerHTML="text",c.classList.add("tebleTextP"),p.appendChild(c),l.appendChild(p);const f=document.createElement("input");f.classList.add("tableText__input"),f.type="text",f.name="tableText",f.value="",l.appendChild(f);const g=document.createElement("div");g.classList.add("chair","elipsTop");const m=document.createElement("div");m.classList.add("chair","elipsBottom");const u=document.createElement("div");u.classList.add("chair","elipsLeft");const h=document.createElement("div");let b;h.classList.add("chair","elipsRight"),l.appendChild(g),l.appendChild(m),l.appendChild(u),l.appendChild(h),d.addEventListener("click",(function(){b=e.parentNode.removeChild(e),console.log(b),itemCoords=itemCoords.filter(e=>e.id!=b.id),boxItems=document.querySelectorAll(".box-item"),tableDraggables=document.querySelectorAll(".draggable-item"),console.log(itemCoords)})),resizers.appendChild(e),corners=document.querySelectorAll(".resizerTable"),boxItems=document.querySelectorAll(".box-item"),tableDraggables=document.querySelectorAll(".draggable-item"),itemCoords=getAllItemCoords(boxItems),onChangeColor("."+t),disableDraggableParent(),tables=document.querySelectorAll(".resizerTablesTable"),replaceLine("."+t),draggable(),makeresizableTableDiv("."+t),inputsHandler("."+t),onConflictItemsWithOther(),onShowTableAnimation("."+t),buttonForTextItem.removeEventListener("click",onCreateItem),btnTable.removeEventListener("click",onCreateTable)}function makeresizableTableDiv(e){const t=document.querySelector(e),o=document.querySelectorAll(e+" .resizerTable"),s=20;let i=0,a=0,n=0,l=0,r=0,d=0;for(let f=0;f<o.length;f++){const g=o[f];function p(o){if(g.classList.contains("bottom-right")){addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const n=i+(o.pageX-r),l=a+(o.pageY-d);n>s&&(t.style.width=n+"px"),l>s&&(t.style.height=l+"px")}else if(g.classList.contains("bottom-left")){addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const l=a+(o.pageY-d),p=i-(o.pageX-r);l>s&&(t.style.height=l+"px"),p>s&&(t.style.width=p+"px",t.style.left=n+(o.pageX-r)+"px")}else if(g.classList.contains("top-right")){addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const n=i+(o.pageX-r),p=a-(o.pageY-d);n>s&&(t.style.width=n+"px"),p>s&&(t.style.height=p+"px",t.style.top=l+(o.pageY-d)+"px")}else{addTopAndBottomChair(e),addLeftAndRightChair(e),replaceLine(e),onChangeColor(),onConflictItemWithMap(e),onConflictItemsWithOther(e);const p=i-(o.pageX-r),c=a-(o.pageY-d);p>s&&(t.style.width=p+"px",t.style.left=n+(o.pageX-r)+"px"),c>s&&(t.style.height=c+"px",t.style.top=l+(o.pageY-d)+"px")}}function c(){window.removeEventListener("mousemove",p)}g.addEventListener("mousedown",(function(e){e.preventDefault(),i=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),n=t.offsetLeft,l=t.offsetTop,r=e.pageX,d=e.pageY,window.addEventListener("mousemove",p),window.addEventListener("mouseup",c)}))}}function replaceLine(e){const t=document.querySelector(e),o=document.querySelector(`${e} .tableCenter-line`);if(o)switch(!0){case t.offsetWidth<=t.offsetHeight:o.style.width="100%",o.style.height="14px",o.style.borderRadius="15px 15px 0 0";break;case t.offsetWidth>t.offsetHeight:o.style.width="14px",o.style.height="100%",o.style.borderRadius="15px 0 0 15px";default:return}}function addTopAndBottomChair(e){const t=document.querySelector(e+" .tableCenter");if(t.firstChild.classList.contains("tableCenter-line")){function o(t){!function(t){const o=document.querySelector(e+" "+t);o&&(removed=o.parentNode.removeChild(o))}(t)}switch(!0){case t.offsetWidth>415&&t.offsetWidth<=455:o(".elipsTop11");break;case t.offsetWidth>375&&t.offsetWidth<=415:o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>335&&t.offsetWidth<=375:o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>295&&t.offsetWidth<=335:o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>255&&t.offsetWidth<=295:o(".elipsTop7"),o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>215&&t.offsetWidth<=255:o(".elipsTop6"),o(".elipsTop7"),o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>175&&t.offsetWidth<=215:o(".elipsTop5"),o(".elipsTop6"),o(".elipsTop7"),o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>135&&t.offsetWidth<=175:o(".elipsTop4"),o(".elipsTop5"),o(".elipsTop6"),o(".elipsTop7"),o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth>95&&t.offsetWidth<=135:o(".elipsTop3"),o(".elipsTop4"),o(".elipsTop5"),o(".elipsTop6"),o(".elipsTop7"),o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11");break;case t.offsetWidth<=95:document.querySelector(".elipsTop2")&&(o(".elipsTop2"),o(".elipsTop3"),o(".elipsTop4"),o(".elipsTop5"),o(".elipsTop6"),o(".elipsTop7"),o(".elipsTop8"),o(".elipsTop9"),o(".elipsTop10"),o(".elipsTop11"))}function s(o){if(!document.querySelector(e+" "+o)){let e=document.createElement("div");e.classList.add("elipsTop"),e.classList.add("chair"),e.classList.add(o.slice(1)),t.appendChild(e);let s=document.createElement("div");s.classList.add("elipsBottom"),s.classList.add("chair"),s.classList.add(o.slice(1)),t.appendChild(s)}}switch(!0){case t.offsetWidth>415:s(".elipsTop10"),s(".elipsTop9"),s(".elipsTop8"),s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>375&&t.offsetWidth<=415:s(".elipsTop9"),s(".elipsTop8"),s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>335&&t.offsetWidth<=375:s(".elipsTop8"),s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>295&&t.offsetWidth<=335:s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>255&&t.offsetWidth<=295:s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>215&&t.offsetWidth<=255:s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>175&&t.offsetWidth<=215:s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>135&&t.offsetWidth<=175:s(".elipsTop3"),s(".elipsTop2");break;case t.offsetWidth>95&&t.offsetWidth<=135:s(".elipsTop2")}}}function addLeftAndRightChair(e){const t=document.querySelector(e+" .tableCenter");if(t.firstChild.classList.contains("tableCenter-line")){function o(t){!function(t){const o=document.querySelector(e+" "+t);o&&(removed=o.parentNode.removeChild(o))}(t)}switch(!0){case t.offsetHeight>415&&t.offsetHeight<=455:o(".elipsLeft11");break;case t.offsetHeight>375&&t.offsetHeight<=415:o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>335&&t.offsetHeight<=375:o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>295&&t.offsetHeight<=335:o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>255&&t.offsetHeight<=295:o(".elipsLeft7"),o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>215&&t.offsetHeight<=255:o(".elipsLeft6"),o(".elipsLeft7"),o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>175&&t.offsetHeight<=215:o(".elipsLeft5"),o(".elipsLeft6"),o(".elipsLeft7"),o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>135&&t.offsetHeight<=175:o(".elipsLeft4"),o(".elipsLeft5"),o(".elipsLeft6"),o(".elipsLeft7"),o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight>95&&t.offsetHeight<=135:o(".elipsLeft3"),o(".elipsLeft4"),o(".elipsLeft5"),o(".elipsLeft6"),o(".elipsLeft7"),o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11");break;case t.offsetHeight<=95:document.querySelector(".elipsLeft2")&&(o(".elipsLeft2"),o(".elipsLeft3"),o(".elipsLeft4"),o(".elipsLeft5"),o(".elipsLeft6"),o(".elipsLeft7"),o(".elipsLeft8"),o(".elipsLeft9"),o(".elipsLeft10"),o(".elipsLeft11"))}function s(o){if(!document.querySelector(e+" "+o)){let e=document.createElement("div");e.classList.add("elipsLeft"),e.classList.add("chair"),e.classList.add(o.slice(1)),t.appendChild(e);let s=document.createElement("div");s.classList.add("elipsRight"),s.classList.add("chair"),s.classList.add(o.slice(1)),t.appendChild(s)}}switch(!0){case t.offsetHeight>415:s(".elipsLeft10"),s(".elipsLeft9"),s(".elipsLeft8"),s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>375&&t.offsetHeight<=415:s(".elipsLeft9"),s(".elipsLeft8"),s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>335&&t.offsetHeight<=375:s(".elipsLeft8"),s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>295&&t.offsetHeight<=335:s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>255&&t.offsetHeight<=295:s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>215&&t.offsetHeight<=255:s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>175&&t.offsetHeight<=215:s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>135&&t.offsetHeight<=175:s(".elipsLeft3"),s(".elipsLeft2");break;case t.offsetHeight>95:s(".elipsLeft2")}}}function onChangeColor(){(chairs=document.querySelectorAll(".chair")).forEach(e=>{e.addEventListener("click",changeColorChair)})}function changeColorChair(e){e.target.classList.toggle("elipsBgColored")}function disableDraggableParent(){document.querySelectorAll(".resizerTablesTable").forEach(e=>{e.addEventListener("mouseover",(function(){document.querySelectorAll(".resizerTable").forEach(e=>{this.style.opacity="1"}),dragDisable(mapDraggble,draggableCollection)})),e.addEventListener("mouseout",(function(){document.querySelectorAll(".resizerTable").forEach(e=>{this.style.opacity="0"}),dragEnable(mapDraggble,draggableCollection)}))})}function dragDisable(e,t){e.disable(),t.forEach(e=>{e.disable()})}function dragEnable(e,t){e.enable(),t.forEach(e=>{e.enable()})}function inputsHandler(e){let t=document.querySelector(e+" .tebleTextP");const o=document.querySelector(e+" .tableText__input");t.addEventListener("dblclick",(function(){function e(){t.innerHTML=this.value||"num",o.style.display="none",t.style.display="block"}this.style.display="none",o.style.display="block",o.focus(),o.value=t.innerHTML,o.addEventListener("blur",e),o.addEventListener("keypress",(function(t){13===t.keyCode&&e()}))}))}function onConflictItemWithMap(e){const t=document.querySelector(e);if(t){const e=t.offsetWidth,l=t.offsetHeight;let r,d,p,c;const f=draggedMap.offsetWidth,g=draggedMap.offsetHeight;function o(){let e=t.offsetLeft,o=t.offsetTop;const s=t.style.transform||"translate(0px, 0px)";let i=getTranslateXValue(s),a=getTranslateYValue(s);r=i+e,d=a+o}function s(){if(e+r>f-40){var o=new Event("mouseup");window.dispatchEvent(o),p=r,t.style.maxWidth=e-7+"px"}p!==r&&(t.style.maxWidth="")}function i(){if(l+d>g-40){var e=new Event("mouseup");window.dispatchEvent(e),c=d,t.style.maxHeight=l-7+"px"}c!==d&&(t.style.maxHeight="")}function a(){if(r<45){var e=new Event("mouseup");window.dispatchEvent(e),t.style.maxWidth=f-10+"px",p=t.style.width,t.style.left="40px"}}function n(){if(d<45){var e=new Event("mouseup");window.dispatchEvent(e)}}o(),s(),i(),a(),n()}}function onConflictItemsWithOther(e){const t=document.querySelector(e);if(t){const e=itemCoords.filter(e=>e.id!==t.id),a=t.offsetWidth,n=t.offsetHeight,l=t.offsetLeft,r=t.offsetTop,d=t.style.transform||"translate(0px, 0px)",p=getTranslateXValue(d),c=getTranslateYValue(d);function o(){const t=e.filter(e=>e.itemTranslateTop+e.positionTop+e.itemHeight>r+c&&e.itemTranslateTop+e.positionTop<r+c+n&&e.itemTranslateLeft+e.positionLeft>l+p).map(e=>e.positionLeft+e.itemTranslateLeft);let o;switch(o=Math.min(...t),!0){case void 0!==o&&a+l+p>o&&l+p<o:o=Math.min(...t);let e=new Event("mouseup");window.dispatchEvent(e),console.log("bum bum");break;default:return!1}}function s(){const t=e.filter(e=>e.itemTranslateLeft+e.positionLeft+e.itemWidth>l+p&&e.itemTranslateLeft+e.positionLeft<l+p+a),o=t.map(e=>e.positionTop+e.itemTranslateTop),s=t.find(e=>e.positionTop+e.itemTranslateTop==o);let i;s&&(i=s.itemHeight||0);const d=Math.min(...o);if(n+r+c>d&&r+c<d+i){var f=new Event("mouseup");window.dispatchEvent(f),console.log("slam"),console.log(d)}}function i(){const t=e.filter(e=>e.itemTranslateTop+e.positionTop+e.itemHeight>r+c&&e.itemTranslateTop+e.positionTop<r+c+n&&e.itemTranslateLeft+e.positionLeft<l+p),o=t.map(e=>e.positionLeft+e.itemTranslateLeft);let s,i,a=Math.max(...o);switch(t&&(s=t.find(e=>e.positionLeft+e.itemTranslateLeft==a)),s&&(i=s.positionLeft+s.itemTranslateLeft+s.itemWidth||0),!0){case void 0!==s&&l+p<i:let e=new Event("mouseup");window.dispatchEvent(e),console.log("bumssss");break;default:return!1}}o(),s(),i()}}btnTable.addEventListener("click",onCreateTable),makeresizableTableDiv(".resizableTable"),disableDraggableParent(),onConflictItemsWithOther();const buttonForTextItem=document.getElementById("addElement");function onCreateItem(){const e=document.createElement("div"),t=e.id="id"+Date.now();console.log(t),e.classList.add(t),e.classList.add("box-item"),e.classList.add("any-map-item"),e.classList.add("draggable-item"),e.classList.add("resizableTable");const o=document.createElement("div");o.classList.add("resizerTablesTable"),e.appendChild(o);const s=document.createElement("div");s.classList.add("resizerTable","top-left");const i=document.createElement("div");i.classList.add("resizerTable","top-right");const a=document.createElement("div");a.classList.add("resizerTable","bottom-left");const n=document.createElement("div");n.classList.add("resizerTable","bottom-right"),o.appendChild(s),o.appendChild(i),o.appendChild(a),o.appendChild(n);const l=document.createElement("div");l.classList.add("tableCenter"),l.classList.add("text-item"),e.appendChild(l);const r=document.createElement("div");r.innerHTML="x",r.classList.add("tableCenter-del"),l.appendChild(r);const d=document.createElement("div");d.classList.add("tableText");const p=document.createElement("p");p.innerHTML="text",p.classList.add("tebleTextP"),d.appendChild(p),l.appendChild(d);const c=document.createElement("input");let f;c.classList.add("tableText__input"),c.type="text",c.name="tableText",c.value="",l.appendChild(c),r.addEventListener("click",(function(){f=e.parentNode.removeChild(e),console.log(f),itemCoords=itemCoords.filter(e=>e.id!=f.id),boxItems=document.querySelectorAll(".box-item"),tableDraggables=document.querySelectorAll(".draggable-item"),console.log(itemCoords)})),resizers.appendChild(e),corners=document.querySelectorAll(".resizerTable"),boxItems=document.querySelectorAll(".box-item"),tableDraggables=document.querySelectorAll(".draggable-item"),itemCoords=getAllItemCoords(boxItems),disableDraggableParent(),tables=document.querySelectorAll(".resizerTablesTable"),draggable(),makeresizableTableDiv("."+t),inputsHandler("."+t),onConflictItemsWithOther(),onShowTableAnimation("."+t),buttonForTextItem.removeEventListener("click",onCreateItem),btnTable.removeEventListener("click",onCreateTable)}buttonForTextItem.addEventListener("click",onCreateItem);let windowsDrag=document.querySelectorAll(".windowsDrag");const windowTopRestrictor=document.querySelector(".resizable-wall.resizable-wall--top");let windowDraggble,startX,startY;function dragWindow(e,t,o){windowDraggble=Draggable.create(e,{type:o,onPress:function(){startX=this.x,startY=this.y,this.target.style.opacity<1&&windowButton.addEventListener("click",createWindow)},onDragStart:function(){mapDraggble.disable(),this.target.style.opacity=1},onRelease:function(){mapDraggble.enable()},onDragEnd:function(){e.forEach(e=>{this.hitTest(e)&&TweenMax.to(this.target,.1,{x:startX,y:startY})})},bounds:restricterTop})}dragWindow(windowsDrag,windowTopRestrictor,"x");const windowButton=document.querySelector("#addWindow");function createWindow(){const e=document.querySelector(".resizable-wall"),t=document.createElement("div");t.style.display="block";const o=t.id="id"+Date.now();console.log(o),t.classList.add(o),t.classList.add("resizableWindowWrapper","box-item"),t.classList.add("windowsDrag");const s=document.createElement("div");s.classList.add("resizerWindowInner"),t.appendChild(s);const i=document.createElement("div");i.classList.add("resizerWindow","left-side");const a=document.createElement("div");a.classList.add("resizerWindow","top-side");const n=document.createElement("div");n.classList.add("resizerWindow","bottom-side");const l=document.createElement("div");l.classList.add("resizerWindow","right-side"),s.appendChild(i),s.appendChild(a),s.appendChild(n),s.appendChild(l),e.appendChild(t);const r=document.createElement("div");r.classList.add("tableText","window-text"),r.style.display="block";const d=document.createElement("p");d.innerHTML="text",d.classList.add("tebleTextP"),r.appendChild(d),t.appendChild(r);const p=document.createElement("input");p.classList.add("tableText__input","window-input"),p.type="text",p.name="tableText",p.value="",t.appendChild(p);const c=document.createElement("div");let f;c.innerHTML="x",c.classList.add("tableCenter-del"),s.appendChild(c),c.addEventListener("click",(function(){f=t.parentNode.removeChild(t),console.log(f),itemCoords=itemCoords.filter(e=>e.id!=f.id),boxItems=document.querySelectorAll(".box-item"),console.log(itemCoords)})),boxItems=document.querySelectorAll(".box-item"),sides=document.querySelectorAll(".resizerWindow"),windowsDrag=document.querySelectorAll(".windowsDrag"),itemCoords=getAllItemCoords(boxItems),disableWindowParent(sides),makeresizableWindowDiv("."+o),dragWindow(windowsDrag,windowTopRestrictor,"x"),inputsHandler("."+o),onConflictItemsWithOther(),onShowWindowAnimation("."+o),windowButton.removeEventListener("click",createWindow)}function onShowTableAnimation(e){const t={x:draggedMap.offsetWidth/2-50,y:draggedMap.offsetHeight/2-50,opacity:.6,scale:.96,zIndex:1005};TweenMax.fromTo(e,.2,{x:0,y:0,opacity:.2,scale:.4,delay:.2},t)}function makeresizableWindowDiv(e){const t=document.querySelector(e),o=document.querySelectorAll(e+" .resizerWindow"),s=60;let i=0,a=0,n=0,l=0,r=0,d=0;for(let f=0;f<o.length;f++){const g=o[f];function p(o){if(g.classList.contains("right-side")){windowsOnConflict(e),elCoords=getAllItemCoords(windowsDrag);const a=i+(o.pageX-r);a>s&&(t.style.width=a+"px")}else if(g.classList.contains("bottom-side")){windowsOnConflict(e),elCoords=getAllItemCoords(windowsDrag);const i=a+(o.pageY-d);i>s&&(t.style.height=i+"px")}else if(g.classList.contains("top-side")){windowsOnConflict(e),elCoords=getAllItemCoords(windowsDrag);const i=a-(o.pageY-d);i>s&&(t.style.height=i+"px",t.style.top=l+(o.pageY-d)+"px")}else{windowsOnConflict(e),elCoords=getAllItemCoords(windowsDrag);const a=i-(o.pageX-r);a>s&&(t.style.width=a+"px",t.style.left=n+(o.pageX-r)+"px")}}function c(){window.removeEventListener("mousemove",p)}g.addEventListener("mousedown",(function(e){elCoords=getAllItemCoords(windowsDrag),e.preventDefault(),i=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),n=t.offsetLeft,l=t.offsetTop,r=e.pageX,d=e.pageY,window.addEventListener("mousemove",p),window.addEventListener("mouseup",c)}))}}windowButton.addEventListener("click",createWindow),makeresizableWindowDiv(".resizableWindowWrapper");const collectionWindowItems=document.querySelectorAll(".resizerWindowInner");function disableWindowParent(e){function t(){dragDisable(mapDraggble,windowDraggble)}function o(){dragEnable(mapDraggble,windowDraggble)}e.forEach(e=>{e.addEventListener("mouseover",t),e.addEventListener("mouseout",o)})}disableWindowParent(sides);let elCoords=getAllItemCoords(windowsDrag);function windowsOnConflict(e){const t=document.querySelector(e);if(console.log(t),t){const e=elCoords.filter(e=>e.id!==t.id),i=t.offsetWidth,a=(t.offsetHeight,t.offsetLeft),n=(t.offsetTop,t.style.transform||"translate(0px, 0px)"),l=getTranslateXValue(n);getTranslateYValue(n);function o(){const t=document.querySelector(".resizable-wall--top");console.log(t.offsetLeft);const o=e.filter(e=>e.itemTranslateLeft+e.positionLeft>a+l).map(e=>e.positionLeft+e.itemTranslateLeft);let s;switch(s=Math.min(...o),console.log(t.offsetWidth),console.log(i+a+l),!0){case void 0!==s&&i+a+l>s-15||i+a+l>t.offsetWidth-40:s=Math.min(...o);let e=new Event("mouseup");window.dispatchEvent(e),console.log("bum bum");break;default:return!1}}function s(){const t=e.filter(e=>e.itemTranslateLeft+e.positionLeft<a+l),o=t.map(e=>e.positionLeft+e.itemTranslateLeft);let s,i,n=Math.max(...o);switch(t&&(s=t.find(e=>e.positionLeft+e.itemTranslateLeft==n)),s&&(i=s.positionLeft+s.itemTranslateLeft+s.itemWidth||0),console.log(a,l),!0){case void 0!==s&&a+l<i+15||a+l<40:let e=new Event("mouseup");window.dispatchEvent(e),console.log("bumssss");break;default:return!1}}o(),s()}}function onShowWindowAnimation(e){const t={x:draggedMap.offsetWidth/2-50,opacity:.8};TweenMax.fromTo(e,.2,{x:0,opacity:.2,delay:.2},t)}