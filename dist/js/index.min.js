var scrolled;function makeResizableDiv(e){const t=document.querySelector(e),a=document.querySelectorAll(e+" .resizer"),r=20;let n=0,o=0,s=0,i=0,d=0,p=0;for(let e=0;e<a.length;e++){const u=a[e];function g(e){if(u.classList.contains("bottom-right")){getParentCenter(),getCornerCoords(),getItemCoords();const s=n+(e.pageX-d),i=o+(e.pageY-p);function a(){t.style.width=s+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function g(){t.style.height=i+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(itemTranslateLeft+itemWidth>s-10)return void a();if(itemTranslateTop+itemHeight>i-10)return void g();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft){t.style.width=s+10+"px";var l=new Event("mouseup");return void window.dispatchEvent(l)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=i+10+"px";l=new Event("mouseup");return void window.dispatchEvent(l)}s>r&&(t.style.width=s+"px"),i>r&&(t.style.height=i+"px")}else if(u.classList.contains("bottom-left")){getParentCenter(),getCornerCoords(),getItemCoords();const u=o+(e.pageY-p),m=n-(e.pageX-d);function a(){t.style.width=m+3+"px",t.style.left=s-3+(e.pageX-d)+"px";var a=new Event("mouseup");window.dispatchEvent(a)}function g(){t.style.height=u+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(itemTranslateLeft+itemWidth>m-10)return void a();if(itemTranslateTop+itemHeight>u-10)return void g();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=m+10+"px",t.style.left=s-10+(e.pageX-d)+"px";l=new Event("mouseup");return void window.dispatchEvent(l)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=u+10+"px",t.style.top=i+10+(e.pageY-p)+"px";l=new Event("mouseup");return void window.dispatchEvent(l)}u>r&&(t.style.height=u+"px"),m>r&&(t.style.width=m+"px",t.style.left=s+(e.pageX-d)+"px")}else if(u.classList.contains("top-right")){function a(){t.style.width=s+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function g(){t.style.height=l+3+"px",t.style.top=i-3+(e.pageY-p)+"px";var a=new Event("mouseup");window.dispatchEvent(a)}getParentCenter(),getCornerCoords(),getItemCoords();const s=n+(e.pageX-d),l=o-(e.pageY-p);if(itemTranslateLeft+itemWidth>s-10)return void a();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft)return void a();if(itemTranslateTop+itemHeight>l-10)return void g();if(wrapperHeight<sumPosAndTranslTop)return void g();s>r&&(t.style.width=s+"px"),l>r&&(t.style.height=l+"px",t.style.top=i+(e.pageY-p)+"px")}else{const u=n-(e.pageX-d),m=o-(e.pageY-p);function a(){t.style.width=u+3+"px",t.style.left=s-3+(e.pageX-d)+"px";var a=new Event("mouseup");window.dispatchEvent(a)}function g(){t.style.height=m+3+"px",t.style.top=i-3+(e.pageY-p)+"px";var a=new Event("mouseup");window.dispatchEvent(a)}if(getParentCenter(),getCornerCoords(),getItemCoords(),itemTranslateLeft+itemWidth>u-10)return void a();if(itemTranslateTop+itemHeight>m-10)return void g();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=u+10+"px",t.style.left=s-10+(e.pageX-d)+"px";l=new Event("mouseup");return void window.dispatchEvent(l)}if(wrapperHeight<sumPosAndTranslTop){t.style.height=m+10+"px",t.style.top=i-10+(e.pageY-p)+"px";l=new Event("mouseup");return void window.dispatchEvent(l)}u>r&&(t.style.width=u+"px",t.style.left=s+(e.pageX-d)+"px"),m>r&&(t.style.height=m+"px",t.style.top=i+(e.pageY-p)+"px")}}function l(){window.removeEventListener("mousemove",g)}u.addEventListener("mousedown",(function(e){e.preventDefault(),n=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),o=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),s=t.offsetLeft,i=t.offsetTop,d=e.pageX,p=e.pageY,window.addEventListener("mousemove",g),window.addEventListener("mouseup",l)}))}}window.onscroll=function(){scrolled=window.pageYOffset||document.documentElement.scrollTop,document.getElementById("scroll").innerHTML=scrolled+"px : scroll"},$(window).on("load resize",(function(){var e=$("html").outerWidth(),t=$(window).height();$("#width").html(e+"px : width"),$("#height").html(t+"px : height")})),document.onmousemove=function(e){var t=e.pageX,a=e.pageY;document.getElementById("mouseX").innerHTML=t+": mouseX",document.getElementById("mouseY").innerHTML=a+": mouseY"},makeResizableDiv(".resizable");const btnTable=document.querySelector(".j-wrap-content-sidebar__add-table-btn"),wrapperDraggerMap=document.querySelector(".j-wrap-content-map"),draggedMap=document.querySelector(".draggedMap"),topLeftCorner=document.querySelector(".top-left"),mapConner=document.querySelectorAll(".resizer"),addTableBtn=document.querySelector(".j-wrap-content-sidebar__add-table-btn");let boxItems=document.querySelectorAll(".box-item");const targetElement=document.querySelector(".draggable-item--uno");function onDragRestrictMap(){let e,t;switch(getParentCenter(),getCornerCoords(),!0){case wrapperWidth<sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e-20,y:t});break;case wrapperHeight<sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t-20});break;case wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e+20,y:t});break;case wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t+20});break;default:return}}var mapDraggble;function dragMap(){mapDraggble=Draggable.create(draggedMap,{onDrag:onDragRestrictMap})[0]}let wrapperWidth,wrapperHeight,itemTranslateLeft,itemTranslateTop,itemWidth,itemHeight,sumPosAndTranslLeft,sumPosAndTranslTop,posLeft,posTop;function getParentCenter(){wrapperWidth=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("width").replace("px",""))/2,wrapperHeight=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("height").replace("px",""))/2}function getItemCoords(){itemWidth=targetElement.offsetWidth,itemHeight=targetElement.offsetHeight;const e=targetElement.style.transform||"translate(0px, 0px)";itemTranslateLeft=getTranslateXValue(e),itemTranslateTop=getTranslateYValue(e),console.log("leftTransl: ",itemTranslateLeft,"topTransl: ",itemTranslateTop)}function getTranslateXValue(e){var t=e.indexOf("("),a=e.indexOf(",");return parseInt(e.slice(t+1,a-2))}function getTranslateYValue(e){var t=e.indexOf(","),a=e.indexOf(")");return parseInt(e.slice(t+1,a-1))}function getCornerCoords(){posLeft=draggedMap.offsetLeft,posTop=draggedMap.offsetTop;const e=draggedMap.style.transform||"translate(0px, 0px)";let t=getTranslateXValue(e),a=getTranslateYValue(e);sumPosAndTranslLeft=t+posLeft,sumPosAndTranslTop=a+posTop}function draggable(){Draggable.create(boxItems,{bounds:draggedMap,cursor:"pointer",type:"x, y",inertia:!0,onPress:onPress,onRelease:onRelease,onDragStart:onStart,onDragEnd:function(){boxItems.forEach(e=>{e.style.color="blue",e.style.pointerEvents="auto"}),boxItems.forEach(e=>{this.hitTest(e)&&TweenMax.to(this.target,1,{x:xx,y:yy})})}})}mapConner.forEach(e=>{e.addEventListener("mouseover",(function(){Draggable.get(draggedMap).disable()}))}),mapConner.forEach(e=>{e.addEventListener("mouseout",dragMap)}),dragMap(),getParentCenter(),getCornerCoords(),draggable();var xx=0,yy=0;function onPress(){xx=this.x,yy=this.y,(new TimelineMax).to(this.target,.1,{borderColor:"white",borderWidth:6,ease:Power4.easeIn})}function onStart(){mapDraggble.disable(),boxItems.forEach(e=>{e.style.color="red",e.style.pointerEvents="none"}),(new TimelineMax).to(this.target,.1,{opacity:1,borderColor:"#828282",borderWidth:2,ease:Power4.easeIn})}function onRelease(){mapDraggble.enable(),(new TimelineMax).to(this.target,.1,{borderWidth:3,ease:Power4.easeIn})}btnTable.addEventListener("click",(function(){let e=document.createElement("div");e.classList.add("box-item"),e.classList.add("draggable-item");let t=document.createElement("span");t.innerHTML="X",t.classList.add("spanClose"),t.addEventListener("click",(function(){e.parentNode.removeChild(e)})),draggedMap.appendChild(e),e.appendChild(t),boxItems=document.querySelectorAll(".box-item"),draggable()}));