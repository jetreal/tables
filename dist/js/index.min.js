var scrolled;function makeResizableDiv(e){const t=document.querySelector(e),s=document.querySelectorAll(e+" .resizer"),o=20;let i=0,a=0,l=0,p=0,r=0,n=0;for(let e=0;e<s.length;e++){const g=s[e];function d(e){if(g.classList.contains("bottom-right")){getParentCenter(),getCornerCoords(),getItemCoords(),getMaxRangeItem();const l=i+(e.pageX-r),p=a+(e.pageY-n);function s(){t.style.width=l+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function d(){t.style.height=p+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(maxAboutWidth>l-10)return void s();if(maxAboutHeight>p-10)return void d();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft){t.style.width=l+10+"px";var f=new Event("mouseup");return void window.dispatchEvent(f)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=p+10+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}l>o&&(t.style.width=l+"px"),p>o&&(t.style.height=p+"px")}else if(g.classList.contains("bottom-left")){getParentCenter(),getCornerCoords(),getItemCoords(),getMaxRangeItem();const g=a+(e.pageY-n),c=i-(e.pageX-r);function s(){t.style.width=c+3+"px",t.style.left=l-3+(e.pageX-r)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}function d(){t.style.height=g+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}if(maxAboutWidth>c-10)return void s();if(maxAboutHeight>g-10)return void d();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=c+10+"px",t.style.left=l-10+(e.pageX-r)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}if(wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop){t.style.height=g+10+"px",t.style.top=p+10+(e.pageY-n)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}g>o&&(t.style.height=g+"px"),c>o&&(t.style.width=c+"px",t.style.left=l+(e.pageX-r)+"px")}else if(g.classList.contains("top-right")){function s(){t.style.width=l+3+"px";var e=new Event("mouseup");window.dispatchEvent(e)}function d(){t.style.height=f+3+"px",t.style.top=p-3+(e.pageY-n)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}getParentCenter(),getCornerCoords(),getItemCoords(),getMaxRangeItem();const l=i+(e.pageX-r),f=a-(e.pageY-n);if(maxAboutWidth>l-10)return void s();if(maxAboutHeight>f-10)return void d();if(wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft)return void s();if(wrapperHeight<sumPosAndTranslTop)return void d();l>o&&(t.style.width=l+"px"),f>o&&(t.style.height=f+"px",t.style.top=p+(e.pageY-n)+"px")}else{const g=i-(e.pageX-r),c=a-(e.pageY-n);function s(){t.style.width=g+3+"px",t.style.left=l-3+(e.pageX-r)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}function d(){t.style.height=c+3+"px",t.style.top=p-3+(e.pageY-n)+"px";var s=new Event("mouseup");window.dispatchEvent(s)}if(getParentCenter(),getCornerCoords(),getItemCoords(),getMaxRangeItem(),maxAboutWidth>g-10)return void s();if(maxAboutHeight>c-10)return void d();if(sumPosAndTranslLeft>wrapperWidth){t.style.width=g+10+"px",t.style.left=l-10+(e.pageX-r)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}if(wrapperHeight<sumPosAndTranslTop){t.style.height=c+10+"px",t.style.top=p-10+(e.pageY-n)+"px";f=new Event("mouseup");return void window.dispatchEvent(f)}g>o&&(t.style.width=g+"px",t.style.left=l+(e.pageX-r)+"px"),c>o&&(t.style.height=c+"px",t.style.top=p+(e.pageY-n)+"px")}}function f(){window.removeEventListener("mousemove",d)}g.addEventListener("mousedown",(function(e){e.preventDefault(),i=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),l=t.offsetLeft,p=t.offsetTop,r=e.pageX,n=e.pageY,window.addEventListener("mousemove",d),window.addEventListener("mouseup",f)}))}}window.onscroll=function(){scrolled=window.pageYOffset||document.documentElement.scrollTop,document.getElementById("scroll").innerHTML=scrolled+"px : scroll"},$(window).on("load resize",(function(){var e=$("html").outerWidth(),t=$(window).height();$("#width").html(e+"px : width"),$("#height").html(t+"px : height")})),document.onmousemove=function(e){var t=e.pageX,s=e.pageY;document.getElementById("mouseX").innerHTML=t+": mouseX",document.getElementById("mouseY").innerHTML=s+": mouseY"},makeResizableDiv(".resizable");const btnTable=document.querySelector(".j-wrap-content-sidebar__add-table-btn"),wrapperDraggerMap=document.querySelector(".j-wrap-content-map"),draggedMap=document.querySelector(".draggedMap"),topLeftCorner=document.querySelector(".top-left"),mapConner=document.querySelectorAll(".resizer"),addTableBtn=document.querySelector(".j-wrap-content-sidebar__add-table-btn");let boxItems=document.querySelectorAll(".box-item");const targetElement=document.querySelector(".draggable-item--uno");function onDragRestrictMap(){let e,t;switch(getParentCenter(),getCornerCoords(),!0){case wrapperWidth<sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e-20,y:t});break;case wrapperHeight<sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t-20});break;case wrapperWidth-draggedMap.offsetWidth>sumPosAndTranslLeft:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e+20,y:t});break;case wrapperHeight-draggedMap.offsetHeight>sumPosAndTranslTop:Draggable.get(draggedMap).endDrag(),e=Draggable.get(draggedMap).x,t=Draggable.get(draggedMap).y,TweenLite.set(this.target,{x:e,y:t+20});break;default:return}}var mapDraggble;function dragMap(){mapDraggble=Draggable.create(draggedMap,{onDrag:onDragRestrictMap})[0]}let wrapperWidth,wrapperHeight,itemTranslateLeft,itemTranslateTop,itemWidth,itemHeight,maxItemWidth,maxItemHeight,itemCoords;function getParentCenter(){wrapperWidth=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("width").replace("px",""))/2,wrapperHeight=parseFloat(getComputedStyle(wrapperDraggerMap,null).getPropertyValue("height").replace("px",""))/2}function getItemCoords(){itemWidth=targetElement.offsetWidth,itemHeight=targetElement.offsetHeight;const e=targetElement.style.transform||"translate(0px, 0px)";itemTranslateLeft=getTranslateXValue(e),itemTranslateTop=getTranslateYValue(e)}function getAllItemCoords(){itemCoords=[],boxItems.forEach((e,t)=>{let s={};s.id=e.id;const o=e.style.transform||"translate(0px, 0px)";s.itemTranslateLeft=getTranslateXValue(o),s.itemTranslateTop=getTranslateYValue(o),s.itemWidth=e.offsetWidth,s.itemHeight=e.offsetHeight,s.positionLeft=e.offsetLeft,s.positiaddTop=e.offsetTop,itemCoords=[...itemCoords,s]})}mapConner.forEach(e=>{e.addEventListener("mouseover",(function(){Draggable.get(draggedMap).disable()}))}),mapConner.forEach(e=>{e.addEventListener("mouseout",dragMap)}),dragMap(),getAllItemCoords();let sumPosAndTranslLeft,sumPosAndTranslTop,posLeft,posTop,maxAboutWidth=0,maxAboutHeight=0;function getMaxRangeItem(){getAllItemCoords();const e=[],t=[];itemCoords.forEach(s=>{let o=s.itemTranslateLeft+s.positionLeft+s.itemWidth,i=s.itemTranslateTop+s.positiaddTop+s.itemHeight;e.push(o);let a=Math.max(...e);t.push(i);let l=Math.max(...t);maxAboutWidth=a,maxAboutHeight=l})}function getTranslateXValue(e){var t=e.indexOf("("),s=e.indexOf(",");return parseInt(e.slice(t+1,s-2))}function getTranslateYValue(e){var t=e.indexOf(","),s=e.indexOf(")");return parseInt(e.slice(t+1,s-1))}function getCornerCoords(){posLeft=draggedMap.offsetLeft,posTop=draggedMap.offsetTop;const e=draggedMap.style.transform||"translate(0px, 0px)";let t=getTranslateXValue(e),s=getTranslateYValue(e);sumPosAndTranslLeft=t+posLeft,sumPosAndTranslTop=s+posTop}var draggableCollection;function draggable(){draggableCollection=Draggable.create(boxItems,{bounds:draggedMap,cursor:"pointer",type:"x, y",inertia:!0,onPress:onPress,onRelease:onRelease,onDragStart:onStart,onDragEnd:function(){boxItems.forEach(e=>{e.style.color="blue",e.style.pointerEvents="auto"}),boxItems.forEach(e=>{this.hitTest(e)&&TweenMax.to(this.target,.1,{x:xx,y:yy})})}})}getMaxRangeItem(),getParentCenter(),getCornerCoords(),draggable();var chairs,xx=0,yy=0;function onPress(){xx=this.x,yy=this.y,(new TimelineMax).to(this.target,.1,{borderColor:"white",borderWidth:6,ease:Power4.easeIn})}function onStart(){mapDraggble.disable(),boxItems.forEach(e=>{e.style.color="red",e.style.pointerEvents="none"}),(new TimelineMax).to(this.target,.1,{opacity:1,borderColor:"#828282",borderWidth:2,ease:Power4.easeIn})}function onRelease(){getMaxRangeItem(),mapDraggble.enable(),(new TimelineMax).to(this.target,.1,{borderWidth:3,ease:Power4.easeIn}),getAllItemCoords()}function dragTableDisable(){mapDraggble.disable(),draggableCollection.forEach(e=>{e.disable()})}function dragTableEnable(){mapDraggble.enable(),draggableCollection.forEach(e=>{e.enable()})}function makeresizableTableDiv(e){const t=document.querySelector(e),s=document.querySelectorAll(e+" .resizerTable"),o=20;let i=0,a=0,l=0,p=0,r=0,n=0;for(let e=0;e<s.length;e++){const g=s[e];function d(e){if(e.stopPropagation(),e.stopImmediatePropagation(),g.classList.contains("bottom-right")){addTopAndBottomChair(),addLeftAndRightChair(),replaceLine();const s=i+(e.pageX-r),l=a+(e.pageY-n);s>o&&(t.style.width=s+"px"),l>o&&(t.style.height=l+"px")}else if(g.classList.contains("bottom-left")){addTopAndBottomChair(),addLeftAndRightChair(),replaceLine();const s=a+(e.pageY-n),p=i-(e.pageX-r);s>o&&(t.style.height=s+"px"),p>o&&(t.style.width=p+"px",t.style.left=l+(e.pageX-r)+"px")}else if(g.classList.contains("top-right")){addTopAndBottomChair(),addLeftAndRightChair(),replaceLine();const s=i+(e.pageX-r),l=a-(e.pageY-n);s>o&&(t.style.width=s+"px"),l>o&&(t.style.height=l+"px",t.style.top=p+(e.pageY-n)+"px")}else{addTopAndBottomChair(),addLeftAndRightChair(),replaceLine();const s=i-(e.pageX-r),d=a-(e.pageY-n);s>o&&(t.style.width=s+"px",t.style.left=l+(e.pageX-r)+"px"),d>o&&(t.style.height=d+"px",t.style.top=p+(e.pageY-n)+"px")}}function f(){window.removeEventListener("mousemove",d),onChangeColor()}g.addEventListener("mousedown",(function(e){e.preventDefault(),dragTableDisable(),i=parseFloat(getComputedStyle(t,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(t,null).getPropertyValue("height").replace("px","")),l=t.offsetLeft,p=t.offsetTop,r=e.pageX,n=e.pageY,window.addEventListener("mousemove",d),window.addEventListener("mouseup",f)}))}}function replaceLine(){const e=document.querySelector(".tableCenter"),t=document.querySelector(".tableCenter-line");switch(!0){case e.offsetWidth<=e.offsetHeight:t.style.width="100%",t.style.height="14px",t.style.borderRadius="15px 15px 0 0";break;case e.offsetWidth>e.offsetHeight:t.style.width="14px",t.style.height="100%",t.style.borderRadius="15px 0 0 15px";default:return}}function addTopAndBottomChair(){let e=document.querySelector(".tableCenter");function t(e){document.querySelector(e)&&function(e){const t=document.querySelector(e);removed=t.parentNode.removeChild(t)}(e)}switch(!0){case e.offsetWidth>415&&e.offsetWidth<=455:t(".elipsTop11");break;case e.offsetWidth>375&&e.offsetWidth<=415:t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>335&&e.offsetWidth<=375:t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>295&&e.offsetWidth<=335:t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>255&&e.offsetWidth<=295:t(".elipsTop7"),t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>215&&e.offsetWidth<=255:t(".elipsTop6"),t(".elipsTop7"),t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>175&&e.offsetWidth<=215:t(".elipsTop5"),t(".elipsTop6"),t(".elipsTop7"),t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>135&&e.offsetWidth<=175:t(".elipsTop4"),t(".elipsTop5"),t(".elipsTop6"),t(".elipsTop7"),t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth>95&&e.offsetWidth<=135:t(".elipsTop3"),t(".elipsTop4"),t(".elipsTop5"),t(".elipsTop6"),t(".elipsTop7"),t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11");break;case e.offsetWidth<=95:document.querySelector(".elipsTop2")&&(t(".elipsTop2"),t(".elipsTop3"),t(".elipsTop4"),t(".elipsTop5"),t(".elipsTop6"),t(".elipsTop7"),t(".elipsTop8"),t(".elipsTop9"),t(".elipsTop10"),t(".elipsTop11"))}function s(t){if(!document.querySelector(t)){let s=document.createElement("div");s.classList.add("elipsTop"),s.classList.add("chair"),s.classList.add(t.slice(1)),e.appendChild(s);let o=document.createElement("div");o.classList.add("elipsBottom"),o.classList.add("chair"),o.classList.add(t.slice(1)),e.appendChild(o)}}switch(!0){case e.offsetWidth>415:s(".elipsTop10"),s(".elipsTop9"),s(".elipsTop8"),s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>375&&e.offsetWidth<=415:s(".elipsTop9"),s(".elipsTop8"),s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>335&&e.offsetWidth<=375:s(".elipsTop8"),s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>295&&e.offsetWidth<=335:s(".elipsTop7"),s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>255&&e.offsetWidth<=295:s(".elipsTop6"),s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>215&&e.offsetWidth<=255:s(".elipsTop5"),s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>175&&e.offsetWidth<=215:s(".elipsTop4"),s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>135&&e.offsetWidth<=175:s(".elipsTop3"),s(".elipsTop2");break;case e.offsetWidth>95&&e.offsetWidth<=135:s(".elipsTop2")}}function addLeftAndRightChair(){let e=document.querySelector(".tableCenter");function t(e){document.querySelector(e)&&function(e){const t=document.querySelector(e);removed=t.parentNode.removeChild(t)}(e)}switch(!0){case e.offsetHeight>415&&e.offsetHeight<=455:t(".elipsLeft11");break;case e.offsetHeight>375&&e.offsetHeight<=415:t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>335&&e.offsetHeight<=375:t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>295&&e.offsetHeight<=335:t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>255&&e.offsetHeight<=295:t(".elipsLeft7"),t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>215&&e.offsetHeight<=255:t(".elipsLeft6"),t(".elipsLeft7"),t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>175&&e.offsetHeight<=215:t(".elipsLeft5"),t(".elipsLeft6"),t(".elipsLeft7"),t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>135&&e.offsetHeight<=175:t(".elipsLeft4"),t(".elipsLeft5"),t(".elipsLeft6"),t(".elipsLeft7"),t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight>95&&e.offsetHeight<=135:t(".elipsLeft3"),t(".elipsLeft4"),t(".elipsLeft5"),t(".elipsLeft6"),t(".elipsLeft7"),t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11");break;case e.offsetHeight<=95:document.querySelector(".elipsLeft2")&&(t(".elipsLeft2"),t(".elipsLeft3"),t(".elipsLeft4"),t(".elipsLeft5"),t(".elipsLeft6"),t(".elipsLeft7"),t(".elipsLeft8"),t(".elipsLeft9"),t(".elipsLeft10"),t(".elipsLeft11"))}function s(t){if(!document.querySelector(t)){let s=document.createElement("div");s.classList.add("elipsLeft"),s.classList.add("chair"),s.classList.add(t.slice(1)),e.appendChild(s);let o=document.createElement("div");o.classList.add("elipsRight"),o.classList.add("chair"),o.classList.add(t.slice(1)),e.appendChild(o)}}switch(!0){case e.offsetHeight>415:s(".elipsLeft10"),s(".elipsLeft9"),s(".elipsLeft8"),s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>375&&e.offsetHeight<=415:s(".elipsLeft9"),s(".elipsLeft8"),s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>335&&e.offsetHeight<=375:s(".elipsLeft8"),s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>295&&e.offsetHeight<=335:s(".elipsLeft7"),s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>255&&e.offsetHeight<=295:s(".elipsLeft6"),s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>215&&e.offsetHeight<=255:s(".elipsLeft5"),s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>175&&e.offsetHeight<=215:s(".elipsLeft4"),s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>135&&e.offsetHeight<=175:s(".elipsLeft3"),s(".elipsLeft2");break;case e.offsetHeight>95:s(".elipsLeft2")}}function onChangeColor(){(chairs=document.querySelectorAll(".chair")).forEach(e=>{e.addEventListener("click",changeColorChair)})}function changeColorChair(e){e.target.classList.toggle("elipsBgColored")}btnTable.addEventListener("click",(function(){let e=document.createElement("div");e.classList.add("box-item"),e.classList.add("draggable-item"),e.id=Date.now();let t,s=document.createElement("span");s.innerHTML="X",s.classList.add("spanClose"),s.addEventListener("click",(function(){t=e.parentNode.removeChild(e),console.log(t),itemCoords=itemCoords.filter(e=>e.id!=t.id),boxItems=document.querySelectorAll(".box-item"),console.log(itemCoords)})),draggedMap.appendChild(e),e.appendChild(s),boxItems=document.querySelectorAll(".box-item"),draggable(),getAllItemCoords()})),makeresizableTableDiv(".resizableTable"),addTopAndBottomChair(),addLeftAndRightChair(),onChangeColor();const table=document.querySelector(".resizerTablesTable");function onTableOver(){document.querySelectorAll(".resizerTable").forEach(e=>{e.style.opacity="1"}),dragTableDisable()}function onTableOut(){document.querySelectorAll(".resizerTable").forEach(e=>{e.style.opacity="0"}),dragTableEnable()}table.addEventListener("mouseover",onTableOver),table.addEventListener("mouseout",onTableOut);const tableText=document.querySelector(".tebleTextP"),tableInput=document.querySelector(".tableText__input");function onTextChange(){this.style.display="none",tableInput.style.display="block",tableInput.focus(),tableInput.value=tableText.innerHTML}function onInput(){tableText.innerHTML=this.value||"num",tableInput.style.display="none",tableText.style.display="block"}tableText.addEventListener("dblclick",onTextChange),console.log(tableText.innerHTML),tableInput.addEventListener("blur",onInput),tableInput.addEventListener("keypress",(function(e){13===e.keyCode&&onInput()}));